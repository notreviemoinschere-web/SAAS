import { createContext, useContext, useState, useCallback } from "react";

const translations = {
  en: {
    "app.name": "PrizeWheel Pro",
    "nav.home": "Home",
    "nav.login": "Log In",
    "nav.signup": "Sign Up",
    "nav.logout": "Log Out",
    "nav.dashboard": "Dashboard",
    "nav.campaigns": "Campaigns",
    "nav.players": "Players",
    "nav.staff": "Staff",
    "nav.billing": "Billing",
    "nav.rewards": "Rewards",
    "nav.redeem": "Redeem Code",
    "nav.settings": "Settings",
    "nav.admin": "Admin Panel",
    "nav.tenants": "Tenants",
    "nav.audit": "Audit Logs",
    "nav.fraud": "Fraud Alerts",
    "landing.hero": "Turn Customers Into Loyal Fans",
    "landing.subtitle": "Create exciting prize wheels and promotional games to collect leads, boost engagement, and reward your customers.",
    "landing.cta": "Start Free Trial",
    "landing.demo": "See How It Works",
    "landing.feat1.title": "Easy Setup",
    "landing.feat1.desc": "Create your first campaign in minutes. No coding required.",
    "landing.feat2.title": "Collect Leads",
    "landing.feat2.desc": "Capture emails and phone numbers from every player automatically.",
    "landing.feat3.title": "Boost Sales",
    "landing.feat3.desc": "Drive foot traffic with irresistible prizes and rewards.",
    "landing.pricing": "Simple, Transparent Pricing",
    "landing.pricing.sub": "Start free and scale as you grow.",
    "auth.login.title": "Welcome Back",
    "auth.login.sub": "Sign in to your account",
    "auth.signup.title": "Create Your Space",
    "auth.signup.sub": "Start engaging your customers today",
    "auth.business": "Business Name",
    "auth.email": "Email",
    "auth.password": "Password",
    "auth.forgot": "Forgot password?",
    "auth.noaccount": "Don't have an account?",
    "auth.hasaccount": "Already have an account?",
    "auth.verify.title": "Verify Your Email",
    "auth.verify.desc": "Enter the verification token sent to your email.",
    "auth.reset.title": "Reset Password",
    "auth.reset.desc": "Enter your new password below.",
    "admin.dashboard": "Admin Dashboard",
    "admin.total_tenants": "Total Tenants",
    "admin.active_campaigns": "Active Campaigns",
    "admin.total_plays": "Total Plays",
    "admin.revenue": "Revenue",
    "admin.fraud": "Fraud Alerts",
    "admin.create_tenant": "Create Tenant",
    "tenant.dashboard": "Dashboard",
    "tenant.plays_today": "Plays Today",
    "tenant.leads": "Leads Collected",
    "tenant.conversion": "Conversion Rate",
    "tenant.rewards_issued": "Rewards Issued",
    "tenant.rewards_redeemed": "Rewards Redeemed",
    "tenant.new_campaign": "New Campaign",
    "campaign.title": "Campaign Title",
    "campaign.title_fr": "Title (French)",
    "campaign.desc": "Description",
    "campaign.desc_fr": "Description (French)",
    "campaign.start": "Start Date",
    "campaign.end": "End Date",
    "campaign.legal": "Terms & Conditions",
    "campaign.rules": "Game Rules",
    "campaign.status": "Status",
    "campaign.draft": "Draft",
    "campaign.test": "Test",
    "campaign.active": "Active",
    "campaign.paused": "Paused",
    "campaign.ended": "Ended",
    "campaign.test_mode": "Enter Test Mode",
    "campaign.publish": "Publish",
    "campaign.pause": "Pause",
    "campaign.resume": "Resume",
    "campaign.end": "End Campaign",
    "prize.label": "Prize Label",
    "prize.label_fr": "Label (French)",
    "prize.weight": "Weight",
    "prize.stock": "Stock",
    "prize.value": "Prize Value",
    "prize.type": "Type",
    "prize.add": "Add Prize",
    "prize.color": "Color",
    "game.spin_to_win": "Spin to Win!",
    "game.enter_email": "Enter your email to play",
    "game.enter_phone": "Phone number (optional)",
    "game.accept_terms": "I accept the terms and conditions",
    "game.spin": "SPIN!",
    "game.spinning": "Spinning...",
    "game.congrats": "Congratulations!",
    "game.you_won": "You won",
    "game.your_code": "Your reward code",
    "game.code_expires": "Code expires on",
    "game.no_prize": "Better luck next time!",
    "game.already_played": "You've already played this game",
    "game.not_active": "This campaign is not active yet",
    "billing.current": "Current Plan",
    "billing.upgrade": "Upgrade",
    "billing.invoices": "Invoices",
    "billing.free": "Free",
    "billing.pro": "Pro",
    "billing.business": "Business",
    "billing.month": "/month",
    "billing.year": "/year",
    "redeem.title": "Redeem Reward Code",
    "redeem.enter": "Enter reward code",
    "redeem.verify": "Verify Code",
    "redeem.confirm": "Confirm Redemption",
    "redeem.success": "Code redeemed successfully!",
    "cookie.text": "We use cookies to enhance your experience. By continuing to visit this site, you agree to our use of cookies.",
    "cookie.accept": "Accept All",
    "cookie.reject": "Reject All",
    "cookie.manage": "Manage Preferences",
    "common.save": "Save",
    "common.cancel": "Cancel",
    "common.delete": "Delete",
    "common.edit": "Edit",
    "common.create": "Create",
    "common.loading": "Loading...",
    "common.search": "Search...",
    "common.actions": "Actions",
    "common.status": "Status",
    "common.back": "Back",
    "common.submit": "Submit",
    "common.close": "Close",
    "common.view": "View",
    "common.name": "Name",
    "common.email": "Email",
    "common.no_data": "No data available",
  },
  fr: {
    "app.name": "PrizeWheel Pro",
    "nav.home": "Accueil",
    "nav.login": "Connexion",
    "nav.signup": "Inscription",
    "nav.logout": "Deconnexion",
    "nav.dashboard": "Tableau de bord",
    "nav.campaigns": "Campagnes",
    "nav.players": "Joueurs",
    "nav.staff": "Personnel",
    "nav.billing": "Facturation",
    "nav.rewards": "Recompenses",
    "nav.redeem": "Utiliser un Code",
    "nav.settings": "Parametres",
    "nav.admin": "Administration",
    "nav.tenants": "Locataires",
    "nav.audit": "Journaux d'audit",
    "nav.fraud": "Alertes fraude",
    "landing.hero": "Transformez Vos Clients en Fans Fideles",
    "landing.subtitle": "Creez des roues de prix et des jeux promotionnels pour collecter des leads et recompenser vos clients.",
    "landing.cta": "Essai Gratuit",
    "landing.demo": "Voir Comment Ca Marche",
    "landing.feat1.title": "Installation Facile",
    "landing.feat1.desc": "Creez votre premiere campagne en quelques minutes.",
    "landing.feat2.title": "Collectez des Leads",
    "landing.feat2.desc": "Capturez automatiquement les emails de chaque joueur.",
    "landing.feat3.title": "Boostez les Ventes",
    "landing.feat3.desc": "Attirez du trafic avec des prix irresistibles.",
    "landing.pricing": "Tarifs Simples et Transparents",
    "landing.pricing.sub": "Commencez gratuitement et evoluez.",
    "auth.login.title": "Bon Retour",
    "auth.login.sub": "Connectez-vous a votre compte",
    "auth.signup.title": "Creez Votre Espace",
    "auth.signup.sub": "Commencez a engager vos clients",
    "auth.business": "Nom de l'entreprise",
    "auth.email": "Email",
    "auth.password": "Mot de passe",
    "auth.forgot": "Mot de passe oublie ?",
    "auth.noaccount": "Pas encore de compte ?",
    "auth.hasaccount": "Deja un compte ?",
    "auth.verify.title": "Verifiez Votre Email",
    "auth.verify.desc": "Entrez le jeton de verification.",
    "auth.reset.title": "Reinitialiser le Mot de Passe",
    "auth.reset.desc": "Entrez votre nouveau mot de passe.",
    "admin.dashboard": "Panneau d'Administration",
    "admin.total_tenants": "Total Locataires",
    "admin.active_campaigns": "Campagnes Actives",
    "admin.total_plays": "Total des Jeux",
    "admin.revenue": "Revenus",
    "admin.fraud": "Alertes de Fraude",
    "admin.create_tenant": "Creer un Locataire",
    "tenant.dashboard": "Tableau de bord",
    "tenant.plays_today": "Jeux Aujourd'hui",
    "tenant.leads": "Leads Collectes",
    "tenant.conversion": "Taux de Conversion",
    "tenant.rewards_issued": "Recompenses Emises",
    "tenant.rewards_redeemed": "Recompenses Utilisees",
    "tenant.new_campaign": "Nouvelle Campagne",
    "campaign.title": "Titre de la Campagne",
    "campaign.title_fr": "Titre (Francais)",
    "campaign.desc": "Description",
    "campaign.desc_fr": "Description (Francais)",
    "campaign.start": "Date de Debut",
    "campaign.end": "Date de Fin",
    "campaign.legal": "Conditions Generales",
    "campaign.rules": "Regles du Jeu",
    "campaign.status": "Statut",
    "campaign.draft": "Brouillon",
    "campaign.test": "Test",
    "campaign.active": "Actif",
    "campaign.paused": "En Pause",
    "campaign.ended": "Termine",
    "campaign.test_mode": "Mode Test",
    "campaign.publish": "Publier",
    "campaign.pause": "Pause",
    "campaign.resume": "Reprendre",
    "campaign.end": "Terminer la Campagne",
    "prize.label": "Libelle du Prix",
    "prize.label_fr": "Libelle (Francais)",
    "prize.weight": "Poids",
    "prize.stock": "Stock",
    "prize.value": "Valeur",
    "prize.type": "Type",
    "prize.add": "Ajouter un Prix",
    "prize.color": "Couleur",
    "game.spin_to_win": "Tournez pour Gagner !",
    "game.enter_email": "Entrez votre email pour jouer",
    "game.enter_phone": "Telephone (optionnel)",
    "game.accept_terms": "J'accepte les conditions generales",
    "game.spin": "TOURNER !",
    "game.spinning": "En cours...",
    "game.congrats": "Felicitations !",
    "game.you_won": "Vous avez gagne",
    "game.your_code": "Votre code de recompense",
    "game.code_expires": "Le code expire le",
    "game.no_prize": "Meilleure chance la prochaine fois !",
    "game.already_played": "Vous avez deja joue",
    "game.not_active": "Cette campagne n'est pas encore active",
    "billing.current": "Plan Actuel",
    "billing.upgrade": "Mettre a Niveau",
    "billing.invoices": "Factures",
    "billing.free": "Gratuit",
    "billing.pro": "Pro",
    "billing.business": "Business",
    "billing.month": "/mois",
    "billing.year": "/an",
    "redeem.title": "Utiliser le Code",
    "redeem.enter": "Entrez le code de recompense",
    "redeem.verify": "Verifier le Code",
    "redeem.confirm": "Confirmer l'Utilisation",
    "redeem.success": "Code utilise avec succes !",
    "cookie.text": "Nous utilisons des cookies pour ameliorer votre experience.",
    "cookie.accept": "Tout Accepter",
    "cookie.reject": "Tout Refuser",
    "cookie.manage": "Gerer les Preferences",
    "common.save": "Enregistrer",
    "common.cancel": "Annuler",
    "common.delete": "Supprimer",
    "common.edit": "Modifier",
    "common.create": "Creer",
    "common.loading": "Chargement...",
    "common.search": "Rechercher...",
    "common.actions": "Actions",
    "common.status": "Statut",
    "common.back": "Retour",
    "common.submit": "Soumettre",
    "common.close": "Fermer",
    "common.view": "Voir",
    "common.name": "Nom",
    "common.email": "Email",
    "common.no_data": "Aucune donnee disponible",
  },
};

const I18nContext = createContext();

export function I18nProvider({ children }) {
  const [lang, setLang] = useState(() => {
    const saved = localStorage.getItem("pwp_lang");
    if (saved) return saved;
    const browser = navigator.language?.startsWith("fr") ? "fr" : "en";
    return browser;
  });

  const switchLang = useCallback((newLang) => {
    setLang(newLang);
    localStorage.setItem("pwp_lang", newLang);
  }, []);

  const t = useCallback(
    (key) => translations[lang]?.[key] || translations.en?.[key] || key,
    [lang]
  );

  return (
    <I18nContext.Provider value={{ lang, switchLang, t }}>
      {children}
    </I18nContext.Provider>
  );
}

export function useI18n() {
  const ctx = useContext(I18nContext);
  if (!ctx) throw new Error("useI18n must be used within I18nProvider");
  return ctx;
}
